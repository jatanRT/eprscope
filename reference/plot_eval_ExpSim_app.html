<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Launch this app in order to quickly check recorded individual EPR spectra with their instrumental parameters.
  Additionally, you may try to interactively simulate the isotropic continuous wave (CW) EPR spectra
  using the simple graphical user interface based on the R Shiny and several
  functions from the package (see Details)."><title>Interactive Application to Plot and Evaluate CW Isotropic EPR Spectra — plot_eval_ExpSim_app • eprscope</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="Interactive Application to Plot and Evaluate CW Isotropic EPR Spectra — plot_eval_ExpSim_app"><meta property="og:description" content="Launch this app in order to quickly check recorded individual EPR spectra with their instrumental parameters.
  Additionally, you may try to interactively simulate the isotropic continuous wave (CW) EPR spectra
  using the simple graphical user interface based on the R Shiny and several
  functions from the package (see Details)."><!-- mathjax --><script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js">
</script><!--
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
--><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">eprscope</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.15</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/datasets.html">Package Datasets</a></li>
    <li><a class="dropdown-item" href="../articles/firstSteps.html">First Steps with R Language</a></li>
    <li><a class="dropdown-item" href="../articles/functionality.html">Basic Functionality</a></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Introduction</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jatanrt/eprscope/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Interactive Application to Plot and Evaluate CW Isotropic EPR Spectra</h1>
      <small class="dont-index">Source: <a href="https://github.com/jatanrt/eprscope/blob/master/R/plot_eval_ExpSim_app.R" class="external-link"><code>R/plot_eval_ExpSim_app.R</code></a></small>
      <div class="d-none name"><code>plot_eval_ExpSim_app.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Launch this app in order to quickly check recorded individual EPR spectra with their instrumental parameters.
  Additionally, you may try to interactively simulate the isotropic continuous wave (CW) EPR spectra
  using the simple graphical user interface based on the <a href="https://shiny.posit.co/" class="external-link">R Shiny</a> and several
  functions from the package (see <code>Details</code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_eval_ExpSim_app</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Based on the acquisition EPR spectrum <code>origin</code>, by using the graphical user interface, one can load a spectrum
  and its instrumental/experimental parameters by the <code><a href="readEPR_Exp_Specs.html">readEPR_Exp_Specs</a></code> as well as
  by the <code><a href="readEPR_params_tabs.html">readEPR_params_tabs</a></code> functions. Such spectrum is immediately depicted in the interactive
  <code>{plotly}</code> format by <code><a href="plot_EPR_Specs2D_interact.html">plot_EPR_Specs2D_interact</a></code>. The magnetic flux density \(B\)
  of the EPR spectrum can be converted from <code>mT</code> to <code>G</code> (or vice versa) and to <code>g</code>-values.
  Moreover, if the compound/radical structure is already known, one can display its structure by entering
  its corresponding <code>SMILES</code> code/character string, using the <code><a href="draw_molecule_by_rcdk.html">draw_molecule_by_rcdk</a></code>.
  All the data (spectrum + parameters) can be also used to interactively simulate
  the isotropic EPR spectrum by the <code><a href="eval_sim_EPR_iso.html">eval_sim_EPR_iso</a></code> and to visualize it,
  with its experimental counterpart, by the <code><a href="present_EPR_Sim_Spec.html">present_EPR_Sim_Spec</a></code>. Additionally, one can also print
  and download the corresponding data frame(s)/table(s) in several formats (<code>.csv</code>,<code>.pdf</code> or <code>.xlsx</code>)
  and thus to use the data not only in the <code>R</code> environment but also within other software tools.
  All instantaneously presented EPR spectra can be also exported in common formats like
  <code>.png</code>, <code>.jpeg</code> as well as <code>.pdf</code>.</p>
<p>The result of the isotropic simulation (with the actual parameters)
  can be additionally exported as an <code>.R</code> code snippet/script to eventually fit the simulated spectrum
  (optimize simulation parameters) onto the experimental one by the <code><a href="eval_sim_EPR_isoFit.html">eval_sim_EPR_isoFit</a></code>.
  By saving the script in the working directory, the isotropic simulation fit can be performed right after closing
  the shiny app (window) in order to fine tune the simulation parameters and thus to speed up the analysis
  of the EPR spectrum. If the shiny application is running within the web browser, the user may also print/save
  the entire "dashboard" in the <code>.pdf</code> format to share/present results with/to students or colleagues.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">## run the app just by the following</span></span></span>
<span class="r-in"><span><span class="co">## command in R console:</span></span></span>
<span class="r-in"><span><span class="fu">plot_eval_ExpSim_app</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co">## this is an examples of the raw</span></span></span>
<span class="r-in"><span><span class="co">## shiny R code to run the app,</span></span></span>
<span class="r-in"><span><span class="co">## code example from the `SERVER` part:</span></span></span>
<span class="r-in"><span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>,<span class="va">session</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">## redefinition of `norm.vec.add`</span></span></span>
<span class="r-in"><span><span class="va">norm_vec</span> <span class="op">&lt;-</span> <span class="fu">reactiveValues</span><span class="op">(</span>val <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">observe</span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">normVec</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>   <span class="va">norm_vec</span><span class="op">$</span><span class="va">val</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">vecNorm</span>,<span class="st">","</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span></span>
<span class="r-in"><span>   <span class="va">norm_vec</span><span class="op">$</span><span class="va">val</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span> <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co">## Load experimental spectrum data frame</span></span></span>
<span class="r-in"><span><span class="va">expr_data</span> <span class="op">&lt;-</span> <span class="fu">reactive</span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="fu">req</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">ASCIIfile</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span> <span class="va">spectr.data</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="readEPR_Exp_Specs.html">readEPR_Exp_Specs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     path_to_ASC <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">ASCIIfile</span><span class="op">$</span><span class="va">datapath</span>,</span></span>
<span class="r-in"><span>     col.names <span class="op">=</span> <span class="kw"><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>       <span class="fl">3</span><span class="op">-</span><span class="fu">origin.cond</span><span class="op">(</span>orig <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">origin</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"index"</span>,<span class="st">"B_G"</span>, <span class="st">"dIepr_over_dB"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B_G"</span>, <span class="st">"dIepr_over_dB"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B_mT"</span>,<span class="st">"dIepr_over_dB"</span><span class="op">)</span></span></span>
<span class="r-in"><span>     <span class="op">)</span>,</span></span>
<span class="r-in"><span>     x.unit <span class="op">=</span> <span class="kw"><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>       <span class="fl">3</span><span class="op">-</span><span class="fu">origin.cond</span><span class="op">(</span>orig <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">origin</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       <span class="st">"G"</span>,</span></span>
<span class="r-in"><span>       <span class="st">"G"</span>,</span></span>
<span class="r-in"><span>       <span class="st">"mT"</span></span></span>
<span class="r-in"><span>     <span class="op">)</span>,</span></span>
<span class="r-in"><span>     qValue <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">qValue</span>,</span></span>
<span class="r-in"><span>     origin <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">origin</span>,</span></span>
<span class="r-in"><span>     norm.vec.add <span class="op">=</span> <span class="va">norm_vec</span><span class="op">$</span><span class="va">val</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">spectr.data</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># -------------------- INTERACTIVE SPECTRUM ---------------------</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="va">output</span><span class="op">$</span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plotly-shiny.html" class="external-link">renderPlotly</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span> <span class="co">#</span></span></span>
<span class="r-in"><span> <span class="co">## add g-Value condition:</span></span></span>
<span class="r-in"><span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">gval</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>   <span class="va">expr_data_g</span> <span class="op">&lt;-</span> <span class="fu">expr_data</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>     <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>g_Value <span class="op">=</span></span></span>
<span class="r-in"><span>                     <span class="fu"><a href="eval_gFactor.html">eval_gFactor</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>                       nu.val <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">MWnuGHz</span>,</span></span>
<span class="r-in"><span>                       B.val <span class="op">=</span> <span class="va">.data</span><span class="op">$</span><span class="va">B_mT</span></span></span>
<span class="r-in"><span>                     <span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">}</span></span></span>
<span class="r-in"><span><span class="va">...</span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ján Tarábek.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

