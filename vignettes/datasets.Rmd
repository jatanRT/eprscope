---
title: "Package Datasets"
output: rmarkdown::html_vignette
number_sections: TRUE
link-citations: TRUE
bibliography: datasets.bib
csl: iso690-numeric-en.csl
vignette: >
  %\VignetteIndexEntry{Package Datasets}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}

knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  webshot = "webshot",
  fig.width = 7.2,
  fig.height = 4.8
)
options(
  rmarkdown.html_vignette.check_title = FALSE
)

```

$\require{mhchem}$

```{r setup, include=FALSE}

library(eprscope)
library(icons)
library(knitr)
library(htmlwidgets)
library(DT)

```

# Built-In Datasets

There are two important datasets which are built into the `{eprscope}` üì¶. The first one is the nuclear isotope table summarizing the essential properties of the nuclei in order to analyze the EPR spectra with HF (hyperfine) structure. Whereas, the second one shows the solvent properties important for the variable temperature (VT) or double-resonance (ENDOR) EPR experiments.

## Nuclear Isotope Data Frame

This dataset was taken from the open source [EasySpin](https://easyspin.org/easyspin/documentation/isotopetable.html) package, reformatted and column of Larmor-frequencies in $\mathrm{MHz}$ at $0.35\,\mathrm{mT}$ were added for better orientation in double-resonance ENDOR spectra, see the details in `?isotopes_ds` documentation. The data frame is not only used to analyze the ENDOR spectra however, it is also essential for the simulations of EPR spectra and their fitting onto the experimental ones. See the documentation of the `eval_sim_EPR_iso()`, `eval_sim_EPR_isoFit()` as well as `eval_nu_ENDOR()`.

```{r nuclear-dataset}

# interactive data frame by `{DT}` package with option to select columns
# and to save table as `.csv`, `.pdf` or `.xlsx` format
DT::datatable(isotopes_ds,
  extensions = "Buttons",
  options = list(
    dom = "Bfrtip",
    buttons = c("colvis","csv","pdf","excel")
  ),
  caption = "Dataset with the following variables/columns: Proton number, isotope, stability (either stable, STB or radio-active, RA), isotope name, nuclear spin quantum number, nuclear g-value, natural abundance in %, nuclear quadrupolar moment in Barns and the ENDOR/Larmor frequency in MHz at 0.35 T. The negative sign of Larmor frequency values points to clockwise precession direction according to convention."
) %>%
  DT::formatRound("nu_ENDOR_MHz_035T",digits = 3) # rounding must be also performed by the `DT` pkg.

```

## Solvent Properties

This is the key-feature when performing the EPR experiments, especially for **X-band continuous wave (CW) spectroscopy in solution**. Namely, prior to measurement one has to decide which type of cell will be applied depending on solvent polarity. For polar solvents, e.g. like acetonitrile or dimethyl sulfoxide, either capillary (with $i.d. \leq 1\,\mathrm{mm}$ ) or special [quartz flat cell](https://sp-wilmadlabglass.com/product/standard-te102-aqueous-cells/) ( with a flat-part thickness $\approx (0.3-0.6)\,\mathrm{mm}$) must be used. While for non-polar or solvents with lower polarity, e.g. like toluene, chloroform or tetrahydrofuran, a sample can be analyzed within any kind of cell incl. [common EPR quartz-tubes](https://sp-wilmadlabglass.com/product/4-mm-thin-wall-quartz-epr-sample-tube-250-mm-l/) with $i.d. \approx (2-4)\,\mathrm{mm}$. Additionally, the solvent properties like melting/boiling point as well as viscosity are essential for the variable temperature experiments and particularly for the CW ENDOR ones. Table details can be found in `?solvents_ds` documentation.

```{r solvent-properties}

# similar interactive table like before
DT::datatable(solvents_ds,
  extensions = "Buttons",
  options = list(
    dom = "Bfrtip",
    buttons = c("colvis","csv","pdf","excel"),
    columnDefs = list(list(visible=FALSE, targets=c(7))) # hide solubility/miscibility column 
  ),
  caption = "Dataset with the following variables/columns: solvent name, molecular formula, 
  relative molecular weight, boiling point in ¬∞C, melting point in ¬∞C, density in g/mL, 
  solubility in g/(100 g of water)-not shown, visibility can be switched by the 'column visibility', relative electric permittivity, flash point in ¬∞C and dynamic 
  viscosity in cp."
)

```

# Datasets for Examples and Tests

These involve the [ASCII text](https://www.computerhope.com/jargon/a/ascii.htm) data (with the extensions like `.txt` , `.asc` , `.csv` ), coming from the EPR spectrometer and correspond either to an EPR spectrum table[^1] or the accompanying text file with the (instrumental) parameters used to record the spectrum (with `.par` or `.DSC` / `.dsc` extensions). While the files containing parameters are generated automatically during the spectral data saving period, the tabular ASCII files, related to an EPR spectrum, must be generated by the instrument operator (usually by `File` ‚ûù `Export ASCII` workflow). Additionally, the `{eprscope}` üì¶ contains `.mat` (*Matlab*) files from the *EasySpin* simulations as well as outputs from DFT quantum chemical computations or related structural data either with `.inp.log.zip` or `.sdf` extensions, respectively. All files used in this package are summarized within the following table.

[^1]: Usually the following variables/columns are included in the ASCII tables of the corresponding EPR spectra: "**index**", "**Field [G]**"/"**X [G]**"/"**RF [MHz]**" and "**Intensity []**"/"**Intensity**"

+-------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------+
| File                          | Short Description                                                                                                                                                                                                                                                                                                                                         | Purpose                                                                                                           |
+===============================+===========================================================================================================================================================================================================================================================================================================================================================+===================================================================================================================+
| `Aminoxyl_radical_a.txt`      | ASCII **text table file** corresponding to EPR spectrum of an aminoxyl/nitroxyl radical derivative measured in deionized $\ce{H2O}$ and recorded by/within *Xenon* acquisition software.                                                                                                                                                                  | -   used for testing of `eval_sim_EPR_iso()` and `eval_sim_EPR_isoFit()`                                          |
|                               |                                                                                                                                                                                                                                                                                                                                                           | -   used as an example to demonstrate the `readEPR_Exp_Specs()` functionality                                     |
+-------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------+
| `Aminoxyl_radical_a.DSC`      | ASCII **text file incl. parameters** to record the EPR spectrum of an aminoxyl/nitroxyl radical derivative corresponding to the above-listed `Aminoxyl_radical_a.txt` The file was automatically generated by the *Xenon* acquisition software upon measurement data saving.                                                                              | -   used for testing of `eval_sim_EPR_iso()` and `eval_sim_EPR_isoFit()`                                          |
+-------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------+
| `Aminoxyl_radical_a.mat`      | **Matlab/EasySpin output file** containing all experimental parameters, EPR spectrum table form (*B* vs *Intensity*) as well as simulation and fitting parameters to reproduce the experimental spectrum saved in the above-listed `Aminoxyl_radical_a.txt`                                                                                               | -   used as an example to demonstrate the `readMAT_params_file()` functionality                                   |
+-------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------+
| `TMPD.sdf`                    | **Structured data file** (based MOL-file format) containing structure of the N,N,N',N'-Tetramethyl-p-phenylenediamine ($\ce{TMPD}$) radical cation. Structure (optimized geometry) was calculated by the B3LYP/6-31+G(d,p) DFT level.                                                                                                                     | -   used as an example to demonstrate the `draw_molecule_by_rcdk()` functionality                                 |
+-------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------+
| `TMPDAradCatEPRa.inp.log.zip` | **Zipped output file from *Gaussian* quantum chemical package** software. Standard *Gaussian* output from DFT calculations (by PBE0/EPR-II/CPCM-DMSO) of EPR parameters (*g* and *a/A*) corresponding to $\ce{TMPD^{.+}}$.                                                                                                                                | -   used as an example to demonstrate the `eval_gFactor_QCHcomp()` and `rearrange_aAiso_QCHorgau()` functionality |
+-------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------+
| `TMPDA_specelchem_accu_b.asc` | ASCII **text table file** corresponding to EPR spectrum of electrochemically generated $\ce{TMPD^{.+}}$ by the potentiostatic electrolysis of $1\,\mathrm{mM}~\ce{TMPD}$ solution in $0.3\,\mathrm{M}~\ce{TBAPF6}/\ce{DMSO}$ at $0.308\,\mathrm{V}$ *vs* Ag-quasiref. electrode. Spectral data were recorded by/within the *WinEpr* acquisition software. | -   used as an example to demonstrate the `eval_gFactor_Spec()` and `readEPR_Exp_Specs()` functionality           |
+-------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------+
| `TMPDA_specelchem_accu_b.par` | ASCII **text file incl. parameters** to record the EPR spectrum of electrochemically generated $\ce{TMPD^{.+}}$ corresponding to the above-listed `TMPD_specelchem_accu_b.asc` . The file was automatically created by the *WinEpr* acquisition software upon measurement saving.                                                                         | -   blah1                                                                                                         |
|                               |                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                   |
|                               |                                                                                                                                                                                                                                                                                                                                                           | -   blah2                                                                                                         |
+-------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------+
| `PNT_ENDOR_a.txt`             | ASCII **text table file** corresponding to CW EPR ENDOR spectrum of phenylalenyl (**p**eri**n**aph**t**henyl) radical, which is commonly used as a standard for the CW ENDOR experiments. The actual was recorded by/within the *Xenon* acquisition software.                                                                                             | -   used as an example to demonstrate the `readEPR_Exp_Specs()` functionality                                     |
+-------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------+
| `PNT_ENDOR_a.DSC`             | ASCII **text file incl. parameters** to record the CW ENDOR spectrum of phenylalenyl radical corresponding to the above-listed `PNT_ENDOR_a.txt` . This file was automatically generated by the *Xenon* acquisition software upon measurement saving.                                                                                                     | -   blah1                                                                                                         |
|                               |                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                   |
|                               |                                                                                                                                                                                                                                                                                                                                                           | -   blah2                                                                                                         |
+-------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------+

: Package files used for examples or testing the functions.
