---
title: "Package Datasets"
output: rmarkdown::html_vignette
toc: FALSE
number_sections: FALSE
link-citations: TRUE
bibliography: datasets.bib
csl: iso690-numeric-en.csl
vignette: >
  %\VignetteIndexEntry{Package Datasets}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
pkgdown:
  as_is: FALSE  
---

```{r, include = FALSE}

knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  webshot = "webshot",
  fig.width = 7.2,
  fig.height = 4.8
)
options(
  rmarkdown.html_vignette.check_title = FALSE
)

```

```{r setup, include=FALSE}

library(eprscope)
library(icons)
library(knitr)
library(htmlwidgets)
library(DT)

```

# Built-In Datasets

There are two important datasets built into the `{eprscope}` üì¶. The first one is the nuclear isotope table summarizing the essential properties of the nuclei in order to analyze the EPR spectra with HF (hyperfine) structure. While, the second one shows the solvent properties important for variable temperature (VT), double-resonance (ENDOR) and EPR spectroelectrochemical experiments.

## Nuclear Isotope Data Frame

This dataset was taken from the open source [EasySpin](https://easyspin.org/easyspin/documentation/isotopetable.html) package, reformatted and column of Larmor-frequencies in $\small \mathrm{MHz}$ at $\small 0.35\,\mathrm{mT}$ were added for better orientation in double-resonance ENDOR spectra, see the details in `?isotopes_ds` documentation as well as [R file in \`data-raw\` folder](../data-raw/isotopes_ds.R). The data frame is not only used to analyze the ENDOR spectra however, it is also essential for the simulations of EPR spectra and their fitting onto the experimental ones. See the documentation of the `eval_sim_EPR_iso()`, `eval_sim_EPR_isoFit()` as well as `eval_nu_ENDOR()`.

```{r nuclear-dataset}

# interactive data frame by `{DT}` package with option to select columns
# and to save table as `.csv`, `.pdf` or `.xlsx` format
DT::datatable(isotopes_ds,
  extensions = "Buttons",
  options = list(
    dom = "Bfrtip",
    buttons = c("colvis","csv","pdf","excel")
  ),
  caption = "Dataset with the following variables/columns: Proton number, isotope,
  stability (either stable, STB or radio-active, RA), isotope name, 
  nuclear spin quantum number, nuclear g-value, natural abundance in %, 
  nuclear quadrupolar moment in Barns and the ENDOR/Larmor frequency 
  in MHz at 0.35 T. The negative sign of Larmor frequency values 
  points to clockwise precession direction according to convention."
) %>%
  DT::formatRound("nu_ENDOR_MHz_035T",digits = 3) # rounding must be also performed by the `DT` pkg.

```

## Solvent Properties

When performing the EPR experiments, especially **X-band continuous wave (CW) spectroscopy in solution**, solvent plays an important role. Namely, prior to measurement one has to decide which type of cell will be applied depending on solvent polarity. For polar solvents, such as acetonitrile or dimethyl sulfoxide, either capillary (with $i.d. \leq 1\,\mathrm{mm}$ ) or special [quartz flat cell](https://sp-wilmadlabglass.com/product/standard-te102-aqueous-cells/) ( with a flat-part thickness $\approx (0.3-0.6)\,\mathrm{mm}$) must be used. While for non-polar or solvents with lower polarity, e.g. toluene, chloroform or tetrahydrofuran, a sample can be analyzed within any kind of cell including [common EPR quartz-tubes](https://sp-wilmadlabglass.com/product/4-mm-thin-wall-quartz-epr-sample-tube-250-mm-l/) with $i.d. \approx (2-4)\,\mathrm{mm}$. Additionally, the solvent properties like melting/boiling point as well as viscosity are essential for the variable temperature (VT) experiments and particularly for the CW ENDOR as well as for spectroelectrochemical ones. Table details can be found in `?solvents_ds` documentation and in [R file in \`data-raw\` folder](../data-raw/solvents_ds.R). Solvent properties can be also obtained by the specialized `readEPR_solvent_props()` function.

```{r solvent-properties}

# similar interactive table like before
DT::datatable(solvents_ds,
  extensions = "Buttons",
  options = list(
    dom = "Bfrtip",
    buttons = c("colvis","csv","pdf","excel"),
    columnDefs = list(list(visible=FALSE, targets=c(7))) # hide solubility/miscibility column 
  ),
  caption = "Dataset with the following variables/columns: solvent name, 
  molecular formula, relative molecular weight, boiling point in ¬∞C, 
  melting point in ¬∞C, density in g/mL, solubility 
  in g/(100 g of water)-not shown, visibility can be switched 
  by the 'column visibility', relative electric permittivity, 
  flash point in ¬∞C and dynamic viscosity in cp."
)

```

# Datasets for Examples and Tests

These involve the [ASCII text](https://www.computerhope.com/jargon/a/ascii.htm) data (with the extensions like `.txt` , `.asc` , `.csv` ), coming from the EPR spectrometer and correspond either to an EPR spectrum data frame[^1] or the accompanying ASCII text files with the (instrumental) parameters (with `.par` or `.DSC` / `.dsc` extensions) used to record the corresponding spectra. While the files containing parameters are generated automatically during the spectral data saving period, the tabular ones, related to an EPR spectrum, must be generated by the instrument operator (usually by `File` ‚ûù `Export ASCII` workflow). Some of these files are compressed (as `.zip`) in order to save storage space within the package. Additionally, the `{eprscope}` üì¶ contains `.mat` (*Matlab*) file from the *EasySpin* simulation as well as output from DFT quantum chemical computation or related structural data either with `.inp.log.zip` or `.sdf` extensions, respectively. All these file types are summarized within the following table.

[^1]: Usually the following variables/columns are included in the ASCII tables of the corresponding EPR spectra: "**index**", "**Field [G]**"/"**X [G]**"/"**RF [MHz]**" and "**Intensity []**"/"**Intensity**"

+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| File                                    | Short Description                                                                                                                                                                                                                                                                                                             | Examples in Functions/Tests    |
+=========================================+===============================================================================================================================================================================================================================================================================================================================+================================+
| `Aminoxyl_radical_a.txt`                | ASCII **text table file** corresponding to EPR spectrum of an aminoxyl/nitroxyl radical derivative measured in deionized H~2~O and recorded by the *Xenon* acquisition software.                                                                                                                                              | `eval_DeltaXpp_Spec()`         |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `eval_sim_EPR_isoFit()`        |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `plot_EPR_Specs()`             |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `plot_theme_In_ticks()`        |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `plot_theme_NoY_ticks()`       |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `readEPR_Exp_Specs()`          |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `test-eval_sim_EPR_iso`        |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `test-eval_sim_EPR_isoFit`     |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| `Aminoxyl_radical_a.DSC`                | ASCII **text file incl. parameters** to record the EPR spectrum of an aminoxyl/nitroxyl radical derivative corresponding to the above-listed `Aminoxyl_radical_a.txt` The file was automatically generated by the *Xenon* acquisition software upon measurement data saving.                                                  | `readEPR_params_slct_quant()`  |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `test-eval_sim_EPR_iso`        |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `test-eval_sim_EPR_isoFit`     |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| `Aminoxyl_radical_a.mat`                | **Matlab/EasySpin output file** containing all experimental parameters, EPR spectrum table form (*B* vs *Intensity*) as well as simulation and fitting parameters to reproduce the experimental spectrum saved in the above-listed `Aminoxyl_radical_a.txt`                                                                   | `readMAT_params_file()`        |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| `TMPD.sdf`                              | **Structured data file** (based MOL-file format) containing structure of the N,N,N',N'-Tetramethyl-p-phenylenediamine (TMPD) radical cation. Structure (optimized geometry) was calculated by Density Functional Theory (DFT).                                                                                                | `draw_molecule_by_rcdk()`      |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| `TMPDAradCatEPRa.inp.log.zip`           | **Zipped output file from *Gaussian* quantum chemical package** software. Standard *Gaussian* output from DFT calculations of EPR parameters (*g* and *a/A*) corresponding to TMPD^.+^ .                                                                                                                                      | `eval_gFactor_QCHcomp()`       |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `rearrange_aAiso_QCHorgau()`   |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| `TMPDA_specelchem_accu_b.asc`           | ASCII **text table file** corresponding to EPR spectrum of electrochemically generated TMPD^.+^ by the potentiostatic electrolysis of $1\,\mathrm{mM}$ TMPD solution in $0.3\,\mathrm{M}$ TBAPF~6~/DMSO at $0.308\,\mathrm{V}$ *vs* Ag-quasiref. electrode. Spectral data were recorded by the *WinEpr* acquisition software. | `eval_extremeX_Spec()`         |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `eval_gFactor_Spec()`          |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `plot_EPR_Specs2D_interact()`  |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `plot_theme_Out_ticks()`       |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `readEPR_Exp_Specs()`          |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| `TMPDA_specelchem_accu_b.par`           | ASCII **text file incl. parameters** to record the EPR spectrum of electrochemically generated TMPD^.+^ corresponding to the above-listed `TMPD_specelchem_accu_b.asc` . The file was automatically created by the *WinEpr* acquisition software upon measurement saving.                                                     | `readEPR_param_slct()`         |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `readEPR_params_slct_sim()`    |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `readEPR_params_tabs()`        |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| `PNT_ENDOR_a.txt`                       | ASCII **text table file** corresponding to CW EPR ENDOR spectrum of phenalenyl (**p**eri**n**aph**t**henyl) radical, commonly used as a standard for the CW ENDOR experiments. Spectrum recorded by the *Xenon* acquisition software.                                                                                         | `eval_DeltaXpp_Spec()`         |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `plot_EPR_Specs()`             |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `readEPR_Exp_Specs()`          |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| `PNT_ENDOR_a.DSC`                       | ASCII **text file incl. parameters** to record the CW ENDOR spectrum of phenalenyl radical corresponding to the above-listed `PNT_ENDOR_a.txt` . This file was automatically generated by the *Xenon* acquisition software upon measurement saving.                                                                           | -   blah1                      |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | -   blah2                      |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| `Triarylamine_radCat_decay_a.txt`       |                                                                                                                                                                                                                                                                                                                               | `eval_kinR_EPR_modelFit()`     |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `eval_kinR_EPR_ODE_model()`    |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `plot_labels_xyz()`            |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `plot_theme_NoY_ticks()`       |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `readEPR_Exp_Specs()`          |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| `Triarylamine_radCat_decay_a.DSC`       |                                                                                                                                                                                                                                                                                                                               | `eval_kinR_EPR_modelFit()`     |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `readEPR_param_slct()`         |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| `Triarylamine_radCat_decay_series.zip`  |                                                                                                                                                                                                                                                                                                                               | `plot_EPR_Specs()`             |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `readEPR_Exp_Specs_kin()`      |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| `Triarylamine_radCat_decay_series.DSC`  |                                                                                                                                                                                                                                                                                                                               | `plot_EPR_Specs()`             |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `readEPR_Exp_Specs_kin()`      |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `readEPR_params_slct_kin()`    |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| `AcridineDeriv_Irrad_365nm.csv.zip`     |                                                                                                                                                                                                                                                                                                                               | `readEPR_Exp_Specs()`          |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
| `AcridineDeriv_Irrad_365nm.dsc`         |                                                                                                                                                                                                                                                                                                                               | `readEPR_params_slct_sim()`    |
|                                         |                                                                                                                                                                                                                                                                                                                               |                                |
|                                         |                                                                                                                                                                                                                                                                                                                               | `readEPR_params_tabs()`        |
+-----------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+
